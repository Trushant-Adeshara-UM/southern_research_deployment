<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Southern Research</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="software/a3200.html"><strong aria-hidden="true">1.1.</strong> A3200</a></li><li class="chapter-item expanded "><a href="software/camera.html"><strong aria-hidden="true">1.2.</strong> Camera</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="software/camera/pylon.html"><strong aria-hidden="true">1.2.1.</strong> PylonSDK</a></li><li class="chapter-item expanded "><a href="software/camera/blackfly.html"><strong aria-hidden="true">1.2.2.</strong> Blackfly</a></li></ol></li><li class="chapter-item expanded "><a href="software/conda.html"><strong aria-hidden="true">1.3.</strong> Miniconda</a></li><li class="chapter-item expanded "><a href="software/gitbash.html"><strong aria-hidden="true">1.4.</strong> Git Bash</a></li><li class="chapter-item expanded "><a href="software/srcode.html"><strong aria-hidden="true">1.5.</strong> Source Code Setup</a></li></ol></li><li class="chapter-item expanded "><a href="stages.html"><strong aria-hidden="true">2.</strong> Stages</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="stages/connection.html"><strong aria-hidden="true">2.1.</strong> Connection</a></li><li class="chapter-item expanded "><a href="stages/testing.html"><strong aria-hidden="true">2.2.</strong> Testing</a></li><li class="chapter-item expanded "><a href="stages/pressure.html"><strong aria-hidden="true">2.3.</strong> Pressure</a></li></ol></li><li class="chapter-item expanded "><a href="controller.html"><strong aria-hidden="true">3.</strong> Controller</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="control/testing.html"><strong aria-hidden="true">3.1.</strong> Testing</a></li></ol></li><li class="chapter-item expanded "><a href="printer.html"><strong aria-hidden="true">4.</strong> Printer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="printer/testing.html"><strong aria-hidden="true">4.1.</strong> Testing</a></li></ol></li><li class="chapter-item expanded "><a href="vision.html"><strong aria-hidden="true">5.</strong> Vision</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="vision/testing.html"><strong aria-hidden="true">5.1.</strong> Testing</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Southern Research</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/MassRobotics-FnF-Challenge/hardware_template/tree/main" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p align="justify">This guide provides a comprehensive walkthrough for installing, testing, and conducting ink printing experiments using Aerotech stages. The document outlines the essential software installations necessary for the process and offers a brief overview of each software component.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation-overview"><a class="header" href="#installation-overview">Installation Overview</a></h1>
<h3 id="a3200-motion-control-software"><a class="header" href="#a3200-motion-control-software">A3200 Motion Control Software</a></h3>
<p align="justify">Developed by Aerotech, the A3200 software facilitates interaction with motion stages. While the Motion Composer is typically employed, integration with MATLAB or Python scripts is also supported. This guide emphasizes a Python-based approach, highlighting how to utilize the A3200's communication features to interface with the ASCII server and control the stages via the host computer's IP address.</p>
<h3 id="camera-integration-for-feedback"><a class="header" href="#camera-integration-for-feedback">Camera Integration for Feedback</a></h3>
<p align="justify">The implementation incorporates vision algorithms utilizing cameras from Basler (Pylon) and Blackfly. These cameras serve as feedback mechanisms, enabling precise line width estimation for controller inputs. Python APIs provided by both camera manufacturers are leveraged to maximize their functionalities.</p>
<h3 id="anaconda-for-python-environment-management"><a class="header" href="#anaconda-for-python-environment-management">Anaconda for Python Environment Management</a></h3>
<p align="justify">Given that the project is Python-centric, managing different Python package versions is crucial. This guide recommends using Conda environments for this purpose. Conda is highly effective in duplicating a set of dependencies, streamlining the setup process.</p>
<h3 id="git-bash-for-windows-development"><a class="header" href="#git-bash-for-windows-development">Git Bash for Windows Development</a></h3>
<p align="justify">The development environment is based on Windows, where native Linux commands are not directly applicable. Git Bash is introduced as a solution to this limitation. This guide includes instructions to configure Conda within Git Bash, addressing the absence of native Conda support.</p>
<h3 id="source-code-and-initial-setup"><a class="header" href="#source-code-and-initial-setup">Source Code and Initial Setup</a></h3>
<p align="justify">The software package is hosted on GitHub. Detailed instructions for the initial setup and configuration are provided. While new system installations may encounter missing dependencies, this guide assures easy resolution through pip or Conda, ensuring a smooth environment setup.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="a3200"><a class="header" href="#a3200">A3200</a></h1>
<h3 id="1-download-a3200-software-from-aerotech-website"><a class="header" href="#1-download-a3200-software-from-aerotech-website">1. Download <a href="https://www.aerotech.com/resources-software-downloads-activation/">A3200</a> software from Aerotech website:</a></h3>
<p><img src="software/../assets/a3200_download.png" alt="" /></p>
<h3 id="2-open-a3200-configuration-manager-with-system-specific-configuration-file"><a class="header" href="#2-open-a3200-configuration-manager-with-system-specific-configuration-file">2. Open A3200 Configuration Manager with system specific configuration file:</a></h3>
<p><img src="software/../assets/a3200_config_manager.png" alt="" /></p>
<h3 id="3-open-a3200-cnc-operator-and-test-stage-movements"><a class="header" href="#3-open-a3200-cnc-operator-and-test-stage-movements">3. Open A3200 CNC Operator and test stage movements:</a></h3>
<p><img src="software/../assets/a3200_cnc_operator.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="camera"><a class="header" href="#camera">Camera</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pylonsdk"><a class="header" href="#pylonsdk">PylonSDK</a></h1>
<h3 id="1-download-pylon-sdk-from-baslers-website"><a class="header" href="#1-download-pylon-sdk-from-baslers-website">1. Download <a href="https://www.baslerweb.com/en-us/software/pylon/sdk/">Pylon SDK</a> from Basler's website:</a></h3>
<p><img src="software/camera/../../assets/pylon_sdk_download.png" alt="" /></p>
<h3 id="2-select-camera-suite-for-windows"><a class="header" href="#2-select-camera-suite-for-windows">2. Select camera suite for windows:</a></h3>
<p><img src="software/camera/../../assets/pylon_version.png" alt="" /></p>
<h3 id="3-fill-in-details-to-download-sdk"><a class="header" href="#3-fill-in-details-to-download-sdk">3. Fill in details to download SDK:</a></h3>
<p><img src="software/camera/../../assets/pylon_login.png" alt="" /></p>
<h3 id="4-download-exe-file"><a class="header" href="#4-download-exe-file">4. Download .exe file:</a></h3>
<p><img src="software/camera/../../assets/pylon_final_download.png" alt="" /></p>
<h3 id="5-agree-to-terms-and-conditions"><a class="header" href="#5-agree-to-terms-and-conditions">5. Agree to terms and conditions:</a></h3>
<p><img src="software/camera/../../assets/pylon_installer.png" alt="" /></p>
<h3 id="6-select-developer-profile"><a class="header" href="#6-select-developer-profile">6. Select developer profile:</a></h3>
<p><img src="software/camera/../../assets/pylon_user_profile.png" alt="" /></p>
<h3 id="7-select-all-the-interfaces-applicable"><a class="header" href="#7-select-all-the-interfaces-applicable">7. Select all the interfaces applicable:</a></h3>
<p><img src="software/camera/../../assets/pylon_camera_type.png" alt="" /></p>
<h3 id="8-keep-the-default-destination-folder"><a class="header" href="#8-keep-the-default-destination-folder">8. Keep the default destination folder:</a></h3>
<p><img src="software/camera/../../assets/pylon_installation_location.png" alt="" /></p>
<h3 id="9-verify-and-install-pylon-sdk"><a class="header" href="#9-verify-and-install-pylon-sdk">9. Verify and install Pylon SDK:</a></h3>
<p><img src="software/camera/../../assets/pylon_installation_verification.png" alt="" /></p>
<h3 id="10-wait-for-installation-to-complete"><a class="header" href="#10-wait-for-installation-to-complete">10. Wait for installation to complete:</a></h3>
<p><img src="software/camera/../../assets/pylon_installation_undergo.png" alt="" /></p>
<h3 id="11-close-installer"><a class="header" href="#11-close-installer">11. Close installer:</a></h3>
<p><img src="software/camera/../../assets/pylon_installation_complete.png" alt="" /></p>
<h3 id="12-once-installed-open-pylon-viewer-to-test-camera"><a class="header" href="#12-once-installed-open-pylon-viewer-to-test-camera">12. Once installed open Pylon Viewer to test camera:</a></h3>
<p><img src="software/camera/../../assets/pylon_viewer.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="blackfly"><a class="header" href="#blackfly">Blackfly</a></h1>
<ol>
<li>Download <a href="https://www.flir.com/discover/iis/machine-vision/spinnaker-sdk/">Spinnaker SDK</a> and Python Spinnaker of the same version from Teledyne Flir website:</li>
</ol>
<p><img src="software/camera/../../assets/spinnaker_site.png" alt="" /></p>
<h3 id="note-spinnakers-python-api-for-python38-is-already-in-the-repo-if-you-need-another-version-refer-to-this-site"><a class="header" href="#note-spinnakers-python-api-for-python38-is-already-in-the-repo-if-you-need-another-version-refer-to-this-site">Note: Spinnaker's Python API for python3.8 is already in the repo. If you need another version, refer to this <a href="https://www.flir.com/discover/iis/machine-vision/spinnaker-sdk/">site</a>.</a></h3>
<ol start="2">
<li>Install Spinnaker SDK with the wizard:</li>
</ol>
<p><img src="software/camera/../../assets/spinnaker_wizard.png" alt="" /></p>
<ol start="3">
<li>Select developer installation profile:</li>
</ol>
<p><img src="software/camera/../../assets/spinnaker_sdk.png" alt="" /></p>
<ol start="4">
<li>Make sure following components are selected:</li>
</ol>
<p><img src="software/camera/../../assets/spinnaker_components.png" alt="" /></p>
<ol start="5">
<li>Make sure GiGe driver is installed:</li>
</ol>
<p><img src="software/camera/../../assets/spinnaker_gige.png" alt="" /></p>
<ol start="6">
<li>Spinnaker adaptor configuration:</li>
</ol>
<p><img src="software/camera/../../assets/spinnaker_adaptor.png" alt="" /></p>
<ol start="7">
<li>Open Spin Viewer to test working:</li>
</ol>
<p><img src="software/camera/../../assets/spinnaker_viewer.png" alt="" /></p>
<p>In order to configure Spinnaker's Python API, activate your conda environment if not already:</p>
<pre><code>conda activate ./envs
</code></pre>
<p>Now install PySpin into your conda environment:</p>
<pre><code>pip install addon/spinnaker_python/spinnaker_python-4.0.0.116-cp38-cp38-win_amd64.whl
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="miniconda"><a class="header" href="#miniconda">Miniconda</a></h1>
<h3 id="1-download-miniconda-from-their-website"><a class="header" href="#1-download-miniconda-from-their-website">1. Download <a href="https://docs.anaconda.com/free/miniconda/miniconda-install/">Miniconda</a> from their website:</a></h3>
<p><img src="software/../assets/miniconda_download.png" alt="" /></p>
<h2 id="note-unless-specified-below-keep-default-setting-in-installer"><a class="header" href="#note-unless-specified-below-keep-default-setting-in-installer">Note: Unless specified below, keep default setting in installer.</a></h2>
<h3 id="2-agree-user-license"><a class="header" href="#2-agree-user-license">2. Agree User License:</a></h3>
<center>
<img src="software/../assets/miniconda_license.png" width="500" />
</center>
<h3 id="3-select-all-users-if-admin-privileges-available"><a class="header" href="#3-select-all-users-if-admin-privileges-available">3. Select All Users if admin privileges available:</a></h3>
<center>
<img src="software/../assets/miniconda_user.png" width="500" />
</center>
<h3 id="4-add-anaconda3-to-path-environment"><a class="header" href="#4-add-anaconda3-to-path-environment">4. Add Anaconda3 to PATH environment:</a></h3>
<center>
<img src="software/../assets/miniconda_path.png" width="500" />
</center>
<h3 id="5-finsh-setup"><a class="header" href="#5-finsh-setup">5. Finsh Setup:</a></h3>
<center>
<img src="software/../assets/miniconda_finish.png" width="500" />
</center>
<div style="break-before: page; page-break-before: always;"></div><h1 id="git-bash"><a class="header" href="#git-bash">Git Bash</a></h1>
<h3 id="1-download-git-bash-from-git-website"><a class="header" href="#1-download-git-bash-from-git-website">1. Download <a href="https://git-scm.com/download/win">Git Bash</a> from Git website:</a></h3>
<p><img src="software/../assets/git_bash_download.png" alt="" /></p>
<h3 id="2-select-64-bit-git-for-windows-setup-in-standalone-installer"><a class="header" href="#2-select-64-bit-git-for-windows-setup-in-standalone-installer">2. Select <strong>64-bit</strong> Git for Windows Setup in <strong>Standalone Installer</strong>:</a></h3>
<p><img src="software/../assets/git_bash_version_selection.png" alt="" /></p>
<h2 id="note-unless-specified-below-keep-default-settings-in-installer"><a class="header" href="#note-unless-specified-below-keep-default-settings-in-installer">Note: Unless specified below keep default settings in installer.</a></h2>
<h3 id="3-open-git-bash-setup-tool"><a class="header" href="#3-open-git-bash-setup-tool">3. Open Git Bash setup tool:</a></h3>
<p><img src="software/../assets/gitbash_license.png" alt="" /></p>
<h3 id="4-keep-default-component-selection"><a class="header" href="#4-keep-default-component-selection">4. Keep default component selection:</a></h3>
<p><img src="software/../assets/gitbash_component_selection.png" alt="" /></p>
<h3 id="5-change-default-branch-to-main-instead-of-master"><a class="header" href="#5-change-default-branch-to-main-instead-of-master">5. Change default branch to main instead of master:</a></h3>
<p><img src="software/../assets/gitbash_default_branch.png" alt="" /></p>
<h3 id="6-complete-installation-and-press-finish"><a class="header" href="#6-complete-installation-and-press-finish">6. Complete installation and press Finish:</a></h3>
<p><img src="software/../assets/gitbash_setup_complete.png" alt="" /></p>
<h3 id="7-configure-git-bash-to-work-with-anaconda"><a class="header" href="#7-configure-git-bash-to-work-with-anaconda">7. Configure Git Bash to work with Anaconda:</a></h3>
<p>If Anaconda is installed for current user then navigate to following location, else look for it in the root directory. Got to your user directory as follow:</p>
<p>Goto <strong>{User} -&gt; AppData -&gt; Local -&gt; miniconda3 -&gt; etc -&gt; profile.d</strong></p>
<p>Alternative location <strong>{User} -&gt; miniconda3 -&gt; etc -&gt; profile.d</strong></p>
<p><img src="software/../assets/git_bash_toggle.png" alt="" />
<img src="software/../assets/git_bash_hidden.png" alt="" /></p>
<ul>
<li>Open Git Bash from directory containing profile.d and execute following command:</li>
</ul>
<pre><code>echo ". ${PWD}/conda.sh" &gt;&gt; ~/.bashrc
</code></pre>
<ul>
<li>If the path contains spaces even in user name then use following command:</li>
</ul>
<pre><code>echo ". '${PWD}'/conda.sh" &gt;&gt; ~/.bashrc
</code></pre>
<ul>
<li>Open a new Git Bash terminal and write conda in it to test if its working.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="source-code-setup"><a class="header" href="#source-code-setup">Source Code Setup</a></h1>
<h3 id="1-download-southern_research_deployment-zip-from-github-and-extract-it-to-desired-location"><a class="header" href="#1-download-southern_research_deployment-zip-from-github-and-extract-it-to-desired-location">1. Download <a href="https://github.com/Trushant-Adeshara-UM/southern_research_deployment">southern_research_deployment</a> zip from Github and extract it to desired location:</a></h3>
<p><img src="software/../assets/srcode_download.png" alt="" /></p>
<h3 id="2-open-root-directory-of-southern_research_deployment-in-git-bash"><a class="header" href="#2-open-root-directory-of-southern_research_deployment-in-git-bash">2. Open root directory of southern_research_deployment in Git Bash:</a></h3>
<p><img src="software/../assets/srcode_git_bash.png" alt="" /></p>
<h3 id="3-create-a-new-conda-environment-using-following-command-and-select-y-in-the-prompt"><a class="header" href="#3-create-a-new-conda-environment-using-following-command-and-select-y-in-the-prompt">3. Create a new conda environment using following command and select y in the prompt:</a></h3>
<pre><code>conda create --prefix envs python=3.8
</code></pre>
<p><img src="software/../assets/srcode_conda_env_create.png" alt="" /></p>
<h3 id="4-activate-conda-environment-and-install-dependencies"><a class="header" href="#4-activate-conda-environment-and-install-dependencies">4. Activate conda environment and install dependencies:</a></h3>
<pre><code>conda activate ./envs
</code></pre>
<h3 id="5-possible-errors"><a class="header" href="#5-possible-errors">5. Possible errors:</a></h3>
<pre><code># sympy not found
pip install sympy

# yaml not found
pip install pyyaml
``
# argparse not found
pip install argparse`
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stages-overview"><a class="header" href="#stages-overview">Stages Overview</a></h1>
<p align="justify"> Codebase to control stages resides in <b>src -> stages -> stage_control.py</b> and the configuration file resides in <b> config -> stages.yaml </b>. First step would be to modify parameters in teh <b> stages.yaml </b> file which are as follow:
</p>
<ul>
<li>connection:
<ul>
<li>PC_IP_ADDRESS: "000.000.00.00"</li>
<li>PORT: 0000</li>
<li>SOCKET_TIMEOUT: 600</li>
</ul>
</li>
<li>mode:
<ul>
<li>incremental: True</li>
</ul>
</li>
<li>substrate:
<ul>
<li>GLASS: 0</li>
<li>SILICON: 1</li>
</ul>
</li>
</ul>
<p>Note: There are some parameters for Safety Zone which will be implemented later.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="connection"><a class="header" href="#connection">Connection</a></h1>
<h3 id="1-extract-ip-address-of-current-host-computer-attached-to-stages"><a class="header" href="#1-extract-ip-address-of-current-host-computer-attached-to-stages">1. Extract IP address of current host computer attached to stages:</a></h3>
<p>Open command prompt and use following command:</p>
<pre><code>ipconfig
</code></pre>
<p><img src="stages/../assets/ip_fetch.png" alt="" /></p>
<p>From the output use Ethernet adapter's IPv4 Address.</p>
<h3 id="2-get-port-for-ascii-server"><a class="header" href="#2-get-port-for-ascii-server">2. Get Port for ASCII server:</a></h3>
<p>Open A3200 Configuration Manager and in the left pane go to following parameter:</p>
<p><strong>config_file -&gt; System -&gt; Communication -&gt; ASCII -&gt; CommandPort</strong></p>
<p><img src="stages/../assets/port_fetch.png" alt="" /></p>
<p>Note: Keep all other parameters default for now.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing-stage-connection"><a class="header" href="#testing-stage-connection">Testing Stage Connection</a></h1>
<p align="justify">In order to test if the connection with stages is established, we can run <b>tests -> stages -> stages_enable.py </b> file which will enable all three (X, Y and Z stage) by using following command. </p> 
<pre><code>python tests/stages/stages_enable.py
</code></pre>
<p><img src="stages/../assets/stage_test.png" alt="" /></p>
<p>The output states following:</p>
<ul>
<li>All three stages (X, Y and Z) are enabled in incremental mode.</li>
<li>They are using SI units (Metric, Second).</li>
<li>RAMP Rate is set to 100.</li>
<li>All safezones are cleared.</li>
<li>Lastly, Aerotech connection is closed after sending the commands.</li>
</ul>
<p>Verification to this could be done using A3200 CNC Operator.</p>
<p><img src="stages/../assets/stage_test_val.png" alt="" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pressure"><a class="header" href="#pressure">Pressure</a></h1>
<p align="justify">The model to convert pressure in PSI to dedicated voltage will be implemented in the <b>printer.py</b> file. That voltage would then be passed to setPressure method in Aerotech Class declared in <b>stage_control.py</b>.</p>
<p>Definition of the method is as follow:</p>
<p><img src="stages/./../assets/pressure_method.png" alt="" /></p>
<p align="justify">Two considerations to keep in mind, the pressure passed as argument to set_pressure method is corresponding voltages (not PSI) and it can be seen that the pressure circuit it attached to X stage controller.</p>
<p align="justify">The <b>pressure.yaml</b> configuration file contains gain and bias to convert either pressure (PSI) -> volatage or vice versa:</p>
<ul>
<li>params:
<ul>
<li>gain: 0.0844</li>
<li>bias: 0.0899</li>
</ul>
</li>
</ul>
<pre><code>voltage = gain * pressure + bias       # PSI -&gt; V

pressure = (voltage - bias) / gain     # V -&gt; PSI
</code></pre>
<h3 id="test-pressure"><a class="header" href="#test-pressure">Test Pressure</a></h3>
<p align="justify">In order to test the pressure, we can run <b>tests -> stages -> pressure_test.py</b> using following command from root directory: (Pressure is passed as an argument in PSI along with regulator and solenoid enabler)</p>
<pre><code>python tests/stages/pressure_test.py --pressure 12 --enable 1 

python tests/stages/pressure_test.py --enable 0
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="controller-overview"><a class="header" href="#controller-overview">Controller Overview</a></h1>
<p align="justify">A P-type controller is implemented in <b>src -> control -> controller.py</b> based on the reference line width to output stage speed for achieving that line width. The configuration file containing process model parameters resides in <b>config -> controller.yaml</b> which has following structure:</p>
<ul>
<li>params:
<ul>
<li>gain: 201.22</li>
<li>bias: 22.705</li>
<li>C: 0.2</li>
<li>ref_line_wdith: 280</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing"><a class="header" href="#testing">Testing</a></h1>
<p align="justify">In order to test if the controller is working as expected, we can run <b>tests -> controller -> controller_run.py </b>file which takes reference line width as input parameter from <b>controller.yaml</b> config file to generate stage speed to achieve that line width.</p>
<pre><code>python tests/controller/controller_run.py
</code></pre>
<p><img src="control/../assets/controller_test.png" alt="" /></p>
<p align="justify">For a given reference line width of 280 microns, intial stage speed according to the controller is 0.44187 mm/s. After a new line is printed at this speed, we will estimate line width using a vision system and that will serve as input for next iteration. This process will go on till the controller converges ( error is less than some delta ).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="printer-overview"><a class="header" href="#printer-overview">Printer Overview</a></h1>
<p align="justify">Printer Class is the main class which will handle initialization of stages and controller. Images captured by camera interface will be pass to printer class. The location of this file is <b>src -> system -> printer.py</b> and the configuration file is <b>config -> printer.yaml</b> parameters to which are as follow:</p>
<ul>
<li>
<p>axes:</p>
<ul>
<li>x_axis:
<ul>
<li>id: 0</li>
<li>speed: 5</li>
<li>speed_fast: 50</li>
</ul>
</li>
<li>y_axis:
<ul>
<li>id: 1</li>
<li>speed: 50</li>
<li>speed_fast: 50</li>
</ul>
</li>
<li>z_axis:
<ul>
<li>id: 2</li>
<li>speed: 50</li>
<li>speed_slow: 0.5</li>
</ul>
</li>
</ul>
</li>
<li>
<p>camera_offset:</p>
<ul>
<li>-98.3159</li>
<li>1.1260</li>
<li>5.2599</li>
</ul>
</li>
<li>
<p>moving_height: 18</p>
</li>
<li>
<p>recipe:</p>
<ul>
<li>0</li>
<li>0</li>
<li>0</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing-1"><a class="header" href="#testing-1">Testing</a></h1>
<p>Printer class could be tested in two ways, one is to test movement without pressure and one with pressure.</p>
<h3 id="movement-test"><a class="header" href="#movement-test">Movement Test</a></h3>
<p align="justify">In order to test the movement of the stages, three scripts corresponding to each stage is provided in <b>tests -> move</b> directory.</p>
<p>Move stages in x axis:</p>
<pre><code>python tests/move/x.py --displacement 10 --speed 1
</code></pre>
<p>Move stages in y axis:</p>
<pre><code>python tests/move/y.py --displacement 10 --speed 1
</code></pre>
<p>Move stages in z axis:</p>
<pre><code>python tests/move/z.py --displacement 2 --speed 0.1
</code></pre>
<p>Move stages in b axis:</p>
<pre><code>python tests/move/b.py --displacement 0.1 --speed 5
python tests/move/b.py --displacement -0.1 --speed 5
</code></pre>
<h3 id="print-test"><a class="header" href="#print-test">Print Test</a></h3>
<p align="justify">In order to test the printing, two scripts are provided one of which prints vertically and other horizontally in <b>tests -> print</b> directory.</p>
<p>Print line horizontally:</p>
<pre><code>python tests/print/horizontal_line.py --displacement 15 --speed 0.4 --pressure 10
</code></pre>
<p>Print line vertically:</p>
<pre><code>python tests/print/vertical_line.py --displacement 15 --speed 0.4 --pressure 10
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="vision-overview"><a class="header" href="#vision-overview">Vision Overview</a></h1>
<p align="justify">The end goal is to have camera interface which can easily be configured such that both Pylon and Spin API could be used in the system.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing-2"><a class="header" href="#testing-2">Testing</a></h1>
<p>This is a sample script which will search all the attached cameras in the network and display output. To run the script execute following command:</p>
<pre><code>python tests/camera/cam.py
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
